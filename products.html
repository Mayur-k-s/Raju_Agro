<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Products - Raju Agro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <nav id="mainNav" class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="agro2.jpg" alt="Logo" class="brand-logo">
        <span class="brand-name">Raju Agro</span>
      </a>
      <a href="index.html" class="btn btn-sm btn-outline-dark">Back to Home</a>
    </div>
  </nav>

  <section class="container py-5 mt-5">
    <div class="hero-content-box mb-5 text-center">
      <h1 class="display-6 fw-bold" id="page-title">Our Products</h1>
      <p class="lead mb-0" id="page-desc">Browse our range of trusted agricultural solutions.</p>
    </div>

    <div class="row g-4" id="product-list-container">
      </div>
    
    <div id="no-products-msg" class="text-center mt-5 d-none">
        <h3 class="text-muted">No products found in this category.</h3>
        <a href="index.html" class="btn btn-primary mt-3">Go Back</a>
    </div>
  </section>

  <script src="products.js"></script>
  <script>
    const container = document.getElementById('product-list-container');
    const pageTitle = document.getElementById('page-title');
    const pageDesc = document.getElementById('page-desc');
    const noProductMsg = document.getElementById('no-products-msg');
    
    // 1. Get Category from URL (e.g., products.html?category=insecticides)
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category'); // returns 'fertilizers', 'insecticides', etc.

    // 2. Filter Products
    let filteredProducts = [];
    
    if (category) {
        filteredProducts = products.filter(p => p.category === category);
        
        // Dynamic Titles
        const titles = {
            'fertilizers': 'Our Fertilizers',
            'insecticides': 'Insecticides & Pest Control',
            'pesticides': 'Pesticides & Fungicides',
            'seeds': 'High-Yield Hybrid Seeds'
        };
        const descs = {
            'fertilizers': 'Browse our range of trusted nutrient solutions.',
            'insecticides': 'Protect your crops from harmful pests effectively.',
            'pesticides': 'Solutions for fungal diseases and plant health.',
            'seeds': 'Certified seeds for maximum germination and yield.'
        };

        if(titles[category]) {
            pageTitle.innerText = titles[category];
            pageDesc.innerText = descs[category];
        }
    } else {
        // If no category specified, show everything
        filteredProducts = products;
    }

    // 3. Render HTML
    if (filteredProducts.length > 0) {
        filteredProducts.forEach(product => {
          const card = `
            <div class="col-sm-6 col-md-4 col-lg-3">
              <div class="product-card product-grid-card">
                <div class="product-img-wrapper">
                  <img src="${product.image}" alt="${product.name}">
                </div>
                <div class="card-body d-flex flex-column">
                  <h5 class="fw-bold mb-1">${product.name}</h5>
                  <div class="mb-3 text-muted small">${product.quantity} Pack</div>
                  <div class="mt-auto">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                      <span class="price-tag">${product.price}</span>
                    </div>
                    <a href="product-detail.html?id=${product.id}" class="btn btn-primary w-100">View Details</a>
                  </div>
                </div>
              </div>
            </div>
          `;
          container.innerHTML += card;
        });
    } else {
        noProductMsg.classList.remove('d-none');
    }
  </script>
</body>
</html>